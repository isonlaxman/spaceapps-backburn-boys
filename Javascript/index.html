<!DOCTYPE html>
<html lang="en">

<head>
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <meta charset="utf-8">
    <title>Australia map</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
            background-image: url('./assets/bg.jpg');
            background-repeat: no-repeat;
            background-size: 100% 100%;
            font-family: 'Roboto', sans-serif;
            font-weight: 300;
        }
        
        #container {
            width: 900px;
            fill-opacity: 0.5;
        }
        
        img.displayed {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        h1 {
            font-weight: 700;
            color: #ffffff;
            font-size: 100px;
            margin-bottom: 10px;
            text-align: center;
        }
        
        h2 {
            font-weight: 700;
            color: #ffffff;
            font-size: 26px;
            margin-bottom: 0px;
            padding-bottom: 0px;
            text-align: center;
        }
        
        p {
            font-size: 16px;
            margin: 30px 0 10px 0;
            color: #ffffff;
            text-align: center;
        }
        
        svg {
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <div id="container"></div>
    <h1>Australia Fire Risk Rating</h1>
    <!-- <h2>This is a map of Australia created with Fire Risk Rating.</h2> -->
    <div id="svganchor"></div>
    <br>
    <p>Source of the shapefile: Australian Bureau of Statistics</p>
    </div>
    <script type="text/javascript">
        //Width and height
        var w = 850;
        var h = 700;

        //Define map projection
        var projection = d3.geo.mercator()
            .center([132, -28])
            .translate([w / 2, h / 2])
            .scale(1000);


        //Define path generator
        var path = d3.geo.path()
            .projection(projection);

        var color = d3.scale.ordinal()
            .range(['#C24658', '#B43C50', '#B83D99', '#AD3DB8', '#943EBB', '#C66653', '#C9895E', '#C9A85E', '#BB9C3E']);

        //Create SVG
        var svg = d3.select("#svganchor")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

        //Load in GeoJSON data
        d3.json("aust.json", function(json) {


            //Bind data and create one path per GeoJSON feature
            svg.selectAll("path")
                .data(json.features)
                .enter()
                .append("path")
                .attr("d", path)
                .attr("stroke", "white")
                .attr("fill", "grey")

        });


        d3.json("firerisk.json", function(error, data) {

            console.log(data)

            // using d3.geo.path() which does all the work for you
            svg.selectAll("circle")
                .data(data)
                .enter()
                .append("circle")
                .attr("cx", function(d) {
                    console.log(projection(d));
                    return projection(d)[0];
                })
                .attr("cy", function(d) {
                    return projection(d)[1];
                })
                .attr("stroke", "white")
                .attr("fill", "red");
        });
    </script>
</body>

</html>